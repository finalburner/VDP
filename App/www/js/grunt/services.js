app.factory("AuthService",["socket","Session","P",function(o,n,t){var i={};return i.login=function(i){return new Promise(function(e,r){o.emit(t.SOCKET.LQ,i),o.on(t.SOCKET.LA,function(o){e(o.user),n.create(o.id,o.user.id,o.user.role)})})},i.isAuthenticated=function(){return!!n.userId},i.isAuthorized=function(o){return angular.isArray(o)||(o=[o]),i.isAuthenticated()&&-1!==o.indexOf(n.userRole)},i}]).service("Session",function(){this.create=function(o,n,t){this.id=o,this.userId=n,this.userRole=t},this.destroy=function(){this.id=null,this.userId=null,this.userRole=null}}).factory("socket",["socketFactory",function(o){if(window.cordova)n=o({prefix:"",ioSocket:io.connect("http://80.11.8.31:3000")});else var n=o({prefix:"",ioSocket:io.connect("http://localhost:3000")});return n}]).factory("Notif",["socket","$cordovaToast",function(o,n){return o.on("Notif",function(o){window.cordova?n.show(o.Msg,"short","bottom"):console.log(o.Msg)}),this.Show=function(o){window.cordova?n.show(o,"short","bottom"):console.log(data.Msg)},0}]).factory("ConnectivityMonitor",["$rootScope","$cordovaNetwork","$cordovaToast",function(o,n,t){return{isOnline:function(){return ionic.Platform.isWebView()?n.isOnline():navigator.onLine},isOffline:function(){return ionic.Platform.isWebView()?!n.isOnline():!navigator.onLine},startWatching:function(){ionic.Platform.isWebView()?(o.$on("$cordovaNetwork:online",function(o,n){t.show("Connecté","short","bottom")}),o.$on("$cordovaNetwork:offline",function(o,n){t.show("Déconnecté","short","bottom")})):(window.addEventListener("online",function(o){t.show("Connecté","short","bottom")},!1),window.addEventListener("offline",function(o){t.show("Déconnecté","short","bottom")},!1))}}}]);